{% extends 'social/layout/layout_base.html' %}

{% block main %}
<div class="card"> 

    <br>
    <h1 class="font-dosis fw-500 text-center">Cadastrar  Evento</h1>
    <br>

    <div class="card-body card-round">


    	<form id="formmm" class="card" action="{% url 'social:evento_editar' evento.id %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <h5 class="text-uppercase ">Evento</h5>
            <hr class="hr-sm mb-2">

            <div class="row"> 
                <div class="col-lg-4 col-md-6 col-sm-12">
                    <div class="form-group">
                        <label>Nome <i class="text-danger">*</i></label>
                        <input class="form-control" type="text" name="nome" required value="{{evento.nome}}">
                    </div>
                </div>
                <!--  data-format="&#123;&#123;99&#125;&#125;/&#123;&#123;99&#125;&#125;/&#123;&#123;9999&#125;&#125;" -->

                <div class="col-lg-4 col-md-6 col-sm-12">
                    <div class="form-group">
                        <label>Data de Início <i class="text-danger">*</i></label>
                        <input id="di" name="datainicio" type="date" class="form-control" required>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-12">
                    <div class="form-group">
                        <label>Data de Fim <i class="text-danger">*</i></label>
                        <input id="df" name="datafim" type="date" class="form-control" required>
                    </div>

                </div>
            </div>



            <br><br>
            <hr class="hr-sm mb-2">

            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <button class="btn btn-w-md btn-round btn-info float-right" onclick="">Adicionar <br>Usuário</button>
                </div>
                
            </div>
            <br>

            <div class="row">

                <table  class="table table-striped table-bordered table-responsive bs-select print border-dark text-dark" cellspacing="0">

                    <thead>
                      <tr>
                        <th class="no-print border-dark text-dark">Movimentar</th>
                        <th class="border-dark text-dark">Posição</th>
                        <th class="border-dark text-dark">Usuário</th>
                        <th class="no-print border-dark text-dark">Remover</th>
                    </tr>
                </thead>
                <tfoot class="no-print">
                  <tr>
                    <th class="no-print border-dark text-dark">Movimentar</th>
                    <th class="border-dark text-dark">Posição</th>
                    <th class="border-dark text-dark">Remover</th>
                    <th class="no-print border-dark text-dark">Usuário</th>
                </tr>
            </tfoot>
            <tbody>

              {% for l in evento.lista.all %}

              <tr>
                  <td class="no-print border-dark text-dark"> {% if forloop.first %}

                    <a data-provide="tooltip" data-tooltip-color="primary" title="Descer Posição" style="font-size: 25px;" class="fa fa-arrow-circle-down d-inline" aria-hidden="true" href="#"></a>


                    {% elif forloop.last %}

                    <a data-provide="tooltip" data-tooltip-color="primary" title="Subir Posição" style="font-size: 25px;" class="fa fa-arrow-circle-up d-inline" aria-hidden="true" href="#"></a>
                    

                    {% else %}
                    <a data-provide="tooltip" data-tooltip-color="primary" title="Subir Posição" style="font-size: 25px;" class="fa fa-arrow-circle-up d-inline" aria-hidden="true" href="#"></a>

                    <a data-provide="tooltip" data-tooltip-color="primary" title="Descer Posição" style="font-size: 25px;" class="fa fa-arrow-circle-down d-inline" aria-hidden="true" href="#"></a>

                    {% endif %} 
                </td>
                <td class="border-dark text-dark">{{l.posicao}}°</td>
                <td class="border-dark text-dark">{{l.Usuario.nome}}</td>
                <td class="no-print border-dark text-dark">

                    <a onclick="" id="" data-provide="tooltip" data-tooltip-color="danger" title="Remover Usuário da Lista" style="font-size: 25px;" class="fa fa-window-close d-inline text-danger" aria-hidden="true" href="#"></a> 
                </td>

            </tr>
            {% endfor %}

        </tbody>




    </table>

</div>

<footer class="card-footer text-right">
    <a href="{% url 'social:evento_listar' %}" class="btn btn-secondary" type="reset">Cancelar</a>
    <button class="btn btn-primary" type="submit">Cadastrar</button>
</footer>

</form>

</div>

</div>


{% endblock %}



{% block js %}
<script type="text/javascript">


document.getElementById('di').value = "{{evento.data_inicio.year}}-{% if evento.data_inicio.month < 10 %}0{{evento.data_inicio.month}}{% else %}{{evento.data_inicio.month}}{% endif %}-{% if evento.data_inicio.day < 10 %}0{{evento.data_inicio.day}}{% else %}{{evento.data_inicio.day}}{% endif %}"

document.getElementById('df').value = "{{evento.data_fim.year}}-{% if evento.data_fim.month < 10 %}0{{evento.data_fim.month}}{% else %}{{evento.data_fim.month}}{% endif %}-{% if evento.data_fim.day < 10 %}0{{evento.data_fim.day}}{% else %}{{evento.data_fim.day}}{% endif %}"
document.getElementById("e").className = document.getElementById("e").className + " active open";
document.getElementById("el").className = document.getElementById("el").className + " active";
</script>
{% endblock %}

